{"version":3,"file":"index.js","sources":["../src/utils.ts","../src/Chart/extendData.ts","../src/Label.tsx","../src/Chart/renderLabels.tsx","../node_modules/svg-partial-circle/index.js","../src/Path.tsx","../src/Chart/renderSegments.tsx","../src/Chart/Chart.tsx"],"sourcesContent":["export function degreesToRadians(degrees: number) {\n  return (degrees * Math.PI) / 180;\n}\n\nexport function valueBetween(value: number, min: number, max: number) {\n  if (value > max) return max;\n  if (value < min) return min;\n  return value;\n}\n\nexport function extractPercentage(value: number, percentage: number) {\n  return (percentage / 100) * value;\n}\n\nexport function bisectorAngle(startAngle: number, lengthAngle: number) {\n  return startAngle + lengthAngle / 2;\n}\n\nexport function shiftVectorAlongAngle(angle: number, distance: number) {\n  const angleRadians = degreesToRadians(angle);\n  return {\n    dx: distance * Math.cos(angleRadians),\n    dy: distance * Math.sin(angleRadians),\n  };\n}\n\nexport function isNumber(value: unknown): value is number {\n  return typeof value === 'number';\n}\n\nexport function functionProp<Prop, Payload>(\n  prop: Prop,\n  payload?: Payload\n): Prop extends (...args: any) => any ? ReturnType<Prop> : Prop {\n  return typeof prop === 'function' ? prop(payload) : prop;\n}\n","import { extractPercentage, valueBetween } from '../utils';\nimport type { Data, ExtendedData } from '../commonTypes';\nimport type { PropsWithDefaults as ChartProps } from './Chart';\n\nfunction sumValues(data: Data): number {\n  let sum = 0;\n  for (let i = 0; i < data.length; i++) {\n    sum += data[i].value;\n  }\n  return sum;\n}\n\n// Append \"percentage\", \"degrees\" and \"startAngle\" to each data entry\nexport default function extendData({\n  data,\n  lengthAngle: totalAngle,\n  totalValue,\n  paddingAngle,\n  startAngle: chartStartAngle,\n}: ChartProps): ExtendedData {\n  const total = totalValue || sumValues(data);\n  const normalizedTotalAngle = valueBetween(totalAngle, -360, 360);\n  const numberOfPaddings =\n    Math.abs(normalizedTotalAngle) === 360 ? data.length : data.length - 1;\n  const singlePaddingDegrees = Math.abs(paddingAngle) * Math.sign(totalAngle);\n  const degreesTakenByPadding = singlePaddingDegrees * numberOfPaddings;\n  const degreesTakenByPaths = normalizedTotalAngle - degreesTakenByPadding;\n  let lastSegmentEnd = 0;\n  const extendedData = [];\n\n  // @NOTE: Shall we evaluate percentage accordingly to dataEntry.value's sign?\n  for (let i = 0; i < data.length; i++) {\n    const dataEntry = data[i];\n    const valueInPercentage = total === 0 ? 0 : (dataEntry.value / total) * 100;\n    const degrees = extractPercentage(degreesTakenByPaths, valueInPercentage);\n    const startAngle = lastSegmentEnd + chartStartAngle;\n    lastSegmentEnd = lastSegmentEnd + degrees + singlePaddingDegrees;\n    extendedData.push(\n      Object.assign(\n        {\n          percentage: valueInPercentage,\n          startAngle,\n          degrees,\n        },\n        dataEntry\n      )\n    );\n  }\n  return extendedData;\n}\n","import React from 'react';\nimport type { CSSProperties, SVGProps } from 'react';\nimport type { ExtendedDataEntry } from './commonTypes';\n\nexport type LabelRenderProps = {\n  x: number;\n  y: number;\n  dx: number;\n  dy: number;\n  textAnchor: string;\n  dataEntry: ExtendedDataEntry;\n  dataIndex: number;\n  style?: CSSProperties;\n};\n\ntype Props = SVGProps<SVGTextElement> & LabelRenderProps;\n\nexport default function Label({ dataEntry, dataIndex, ...props }: Props) {\n  return <text dominantBaseline=\"central\" {...props} />;\n}\n\nLabel.displayName = 'ReactMinimalPieChartLabel';\n","import React from 'react';\nimport DefaultLabel from '../Label';\nimport {\n  bisectorAngle,\n  extractPercentage,\n  functionProp,\n  shiftVectorAlongAngle,\n} from '../utils';\nimport type { PropsWithDefaults as ChartProps } from './Chart';\nimport type { LabelRenderProps } from '../Label';\nimport type { ExtendedData, LabelRenderFunction } from '../commonTypes';\n\nfunction round(number: number): number {\n  const divisor = 1e14; // 14 decimals\n  return Math.round((number + Number.EPSILON) * divisor) / divisor;\n}\n\nfunction evaluateTextAnchorPosition({\n  labelPosition,\n  lineWidth,\n  labelHorizontalShift,\n}: {\n  labelPosition: number;\n  lineWidth: number;\n  labelHorizontalShift: number;\n}) {\n  const dx = round(labelHorizontalShift);\n  // Label in the vertical center\n  if (dx === 0) {\n    return 'middle';\n  }\n  // Outward label\n  if (labelPosition > 100) {\n    return dx > 0 ? 'start' : 'end';\n  }\n  // Inward label\n  const innerRadius = 100 - lineWidth;\n  if (labelPosition < innerRadius) {\n    return dx > 0 ? 'end' : 'start';\n  }\n  // Overlying label\n  return 'middle';\n}\n\nfunction renderLabelElement(\n  renderLabel: LabelRenderFunction,\n  labelProps: LabelRenderProps\n): JSX.Element | null {\n  const label = renderLabel(labelProps);\n  if (typeof label === 'string' || typeof label === 'number') {\n    return (\n      <DefaultLabel\n        key={`label-${labelProps.dataEntry.key || labelProps.dataIndex}`}\n        {...labelProps}\n      >\n        {label}\n      </DefaultLabel>\n    );\n  }\n\n  if (React.isValidElement(label)) {\n    return label;\n  }\n  return null;\n}\n\nexport default function renderLabels(data: ExtendedData, props: ChartProps) {\n  return data.map((dataEntry, index) => {\n    const segmentsShift = functionProp(props.segmentsShift, index) ?? 0;\n    const distanceFromCenter =\n      extractPercentage(props.radius, props.labelPosition) + segmentsShift;\n    const { dx, dy } = shiftVectorAlongAngle(\n      bisectorAngle(dataEntry.startAngle, dataEntry.degrees),\n      distanceFromCenter\n    );\n\n    // This object is passed as argument to the \"label\" function prop\n    const labelRenderProps = {\n      x: props.center[0],\n      y: props.center[1],\n      dx,\n      dy,\n      textAnchor: evaluateTextAnchorPosition({\n        labelPosition: props.labelPosition,\n        lineWidth: props.lineWidth,\n        labelHorizontalShift: dx,\n      }),\n      dataEntry,\n      dataIndex: index,\n      style: functionProp(props.labelStyle, index),\n    };\n\n    return props.label && renderLabelElement(props.label, labelRenderProps);\n  });\n}\n","'use strict'\n\n// from http://stackoverflow.com/a/18473154\nconst partialCircle = (cx, cy, r, start, end) => {\n\tconst length = end - start\n\tif (length === 0) return []\n\n\tconst fromX = r * Math.cos(start) + cx\n\tconst fromY = r * Math.sin(start) + cy\n\tconst toX = r * Math.cos(end) + cx\n\tconst toY = r * Math.sin(end) + cy\n\tconst large = Math.abs(length) <= Math.PI ? '0' : '1'\n\tconst sweep = length < 0 ? '0' : '1'\n\n\treturn [\n\t\t['M', fromX, fromY],\n\t\t['A', r, r, 0, large, sweep, toX, toY]\n\t]\n}\n\nmodule.exports = partialCircle\n","import React from 'react';\nimport type { SVGProps } from 'react';\nimport partialCircle from 'svg-partial-circle';\nimport {\n  bisectorAngle,\n  degreesToRadians,\n  extractPercentage,\n  isNumber,\n  shiftVectorAlongAngle,\n  valueBetween,\n} from './utils';\n\nexport function makePathCommands(\n  cx: number,\n  cy: number,\n  startAngle: number,\n  lengthAngle: number,\n  radius: number\n): string {\n  const patchedLengthAngle = valueBetween(lengthAngle, -359.999, 359.999);\n\n  return partialCircle(\n    cx,\n    cy, // center X and Y\n    radius,\n    degreesToRadians(startAngle),\n    degreesToRadians(startAngle + patchedLengthAngle)\n  )\n    .map((command) => command.join(' '))\n    .join(' ');\n}\n\ntype Props = SVGProps<SVGPathElement> & {\n  cx: number;\n  cy: number;\n  lengthAngle: number;\n  lineWidth: number;\n  radius: number;\n  reveal?: number;\n  rounded?: boolean;\n  shift?: number;\n  startAngle: number;\n  title?: string | number;\n};\n\nexport default function Path({\n  cx,\n  cy,\n  lengthAngle,\n  lineWidth,\n  radius,\n  shift = 0,\n  reveal,\n  rounded,\n  startAngle,\n  title,\n  ...props\n}: Props) {\n  const pathRadius = radius - lineWidth / 2;\n  //@NOTE This shift might be rendered as a translation in future\n  const { dx, dy } = shiftVectorAlongAngle(\n    bisectorAngle(startAngle, lengthAngle),\n    shift\n  );\n\n  const pathCommands = makePathCommands(\n    cx + dx,\n    cy + dy,\n    startAngle,\n    lengthAngle,\n    pathRadius\n  );\n  let strokeDasharray;\n  let strokeDashoffset;\n\n  // Animate/hide paths with \"stroke-dasharray\" + \"stroke-dashoffset\"\n  // https://css-tricks.com/svg-line-animation-works/\n  if (isNumber(reveal)) {\n    const pathLength = degreesToRadians(pathRadius) * lengthAngle;\n    strokeDasharray = Math.abs(pathLength);\n    strokeDashoffset =\n      strokeDasharray - extractPercentage(strokeDasharray, reveal);\n  }\n\n  return (\n    <path\n      d={pathCommands}\n      fill=\"none\"\n      strokeWidth={lineWidth}\n      strokeDasharray={strokeDasharray}\n      strokeDashoffset={strokeDashoffset}\n      strokeLinecap={rounded ? 'round' : undefined}\n      {...props}\n    >\n      {title && <title>{title}</title>}\n    </path>\n  );\n}\n\nPath.displayName = 'ReactMinimalPieChartPath';\n","import React from 'react';\nimport type { CSSProperties } from 'react';\nimport Path from '../Path';\nimport { extractPercentage, functionProp, isNumber } from '../utils';\nimport type { ExtendedData } from '../commonTypes';\nimport type { PropsWithDefaults as ChartProps } from './Chart';\n\nfunction combineSegmentTransitionsStyle(\n  duration: number,\n  easing: string,\n  customStyle?: CSSProperties\n): { transition: string } {\n  // Merge chart's animation CSS transition with \"transition\" found to customStyle\n  let transition = `stroke-dashoffset ${duration}ms ${easing}`;\n  if (customStyle && customStyle.transition) {\n    transition = `${transition},${customStyle.transition}`;\n  }\n  return {\n    transition,\n  };\n}\n\nfunction getRevealValue<Reveal>(props: { reveal?: Reveal; animate?: boolean }) {\n  //@NOTE When animation is on, chart has to be fully revealed when reveal is not set\n  if (props.animate && !isNumber(props.reveal)) {\n    return 100;\n  }\n  return props.reveal;\n}\n\nfunction makeEventHandler<Event, EventHandler, Payload>(\n  eventHandler: undefined | (EventHandler & Function),\n  payload: Payload\n) {\n  return (\n    eventHandler &&\n    ((e: Event) => {\n      eventHandler(e, payload);\n    })\n  );\n}\n\nexport default function renderSegments(\n  data: ExtendedData,\n  props: ChartProps,\n  revealOverride?: null | number\n) {\n  // @NOTE this should go in Path component. Here for performance reasons\n  const reveal = revealOverride ?? getRevealValue(props);\n  const {\n    radius,\n    center: [cx, cy],\n  } = props;\n  const lineWidth = extractPercentage(radius, props.lineWidth);\n  const paths = data.map((dataEntry, index) => {\n    const segmentsStyle = functionProp(props.segmentsStyle, index);\n    return (\n      <Path\n        cx={cx}\n        cy={cy}\n        key={dataEntry.key || index}\n        lengthAngle={dataEntry.degrees}\n        lineWidth={lineWidth}\n        radius={radius}\n        rounded={props.rounded}\n        reveal={reveal}\n        shift={functionProp(props.segmentsShift, index)}\n        startAngle={dataEntry.startAngle}\n        title={dataEntry.title}\n        style={Object.assign(\n          {},\n          segmentsStyle,\n          props.animate &&\n            combineSegmentTransitionsStyle(\n              props.animationDuration,\n              props.animationEasing,\n              segmentsStyle\n            )\n        )}\n        stroke={dataEntry.color}\n        tabIndex={props.segmentsTabIndex}\n        onBlur={makeEventHandler(props.onBlur, index)}\n        onClick={makeEventHandler(props.onClick, index)}\n        onFocus={makeEventHandler(props.onFocus, index)}\n        onKeyDown={makeEventHandler(props.onKeyDown, index)}\n        onMouseOver={makeEventHandler(props.onMouseOver, index)}\n        onMouseOut={makeEventHandler(props.onMouseOut, index)}\n      />\n    );\n  });\n\n  if (props.background) {\n    paths.unshift(\n      <Path\n        cx={cx}\n        cy={cy}\n        key=\"bg\"\n        lengthAngle={props.lengthAngle}\n        lineWidth={lineWidth}\n        radius={radius}\n        rounded={props.rounded}\n        startAngle={props.startAngle}\n        stroke={props.background}\n      />\n    );\n  }\n\n  return paths;\n}\n","import React, { useState, useEffect } from 'react';\nimport type {\n  CSSProperties,\n  FocusEvent,\n  KeyboardEvent,\n  MouseEvent,\n  ReactNode,\n} from 'react';\nimport extendData from './extendData';\nimport renderLabels from './renderLabels';\nimport renderSegments from './renderSegments';\nimport type { Data, EventHandler, LabelRenderFunction } from '../commonTypes';\n\ntype Props = {\n  animate?: boolean;\n  animationDuration?: number;\n  animationEasing?: string;\n  background?: string;\n  center?: [number, number];\n  children?: ReactNode;\n  className?: string;\n  data: Data;\n  lengthAngle?: number;\n  lineWidth?: number;\n  label?: LabelRenderFunction;\n  labelPosition?: number;\n  labelStyle?:\n    | CSSProperties\n    | ((dataIndex: number) => CSSProperties | undefined);\n  onBlur?: EventHandler<FocusEvent>;\n  onClick?: EventHandler<MouseEvent>;\n  onFocus?: EventHandler<FocusEvent>;\n  onKeyDown?: EventHandler<KeyboardEvent>;\n  onMouseOut?: EventHandler<MouseEvent>;\n  onMouseOver?: EventHandler<MouseEvent>;\n  paddingAngle?: number;\n  radius?: number;\n  reveal?: number;\n  rounded?: boolean;\n  segmentsShift?: number | ((dataIndex: number) => number | undefined);\n  segmentsStyle?:\n    | CSSProperties\n    | ((dataIndex: number) => CSSProperties | undefined);\n  segmentsTabIndex?: number;\n  startAngle?: number;\n  style?: CSSProperties;\n  totalValue?: number;\n  viewBoxSize?: [number, number];\n};\n\nconst defaultProps = {\n  animationDuration: 500,\n  animationEasing: 'ease-out',\n  center: [50, 50] as [number, number],\n  data: [] as Data,\n  labelPosition: 50,\n  lengthAngle: 360,\n  lineWidth: 100,\n  paddingAngle: 0,\n  radius: 50,\n  startAngle: 0,\n  viewBoxSize: [100, 100] as [number, number],\n};\n\nexport type PropsWithDefaults = Props & typeof defaultProps;\n\nexport function PieChart(props: PropsWithDefaults) {\n  const [revealOverride, setRevealOverride] = useState(\n    props.animate ? 0 : null\n  );\n  useEffect(() => {\n    if (props.animate) {\n      return startInitialAnimation();\n    }\n\n    function startInitialAnimation() {\n      let animationTimerId: number | null;\n      let animationRAFId: number | null;\n      animationTimerId = setTimeout(() => {\n        animationTimerId = null;\n        animationRAFId = requestAnimationFrame(() => {\n          animationRAFId = null;\n          setRevealOverride(null); // Start animation\n        });\n      });\n\n      return () => {\n        animationTimerId && clearTimeout(animationTimerId);\n        animationRAFId && cancelAnimationFrame(animationRAFId);\n      };\n    }\n  }, []);\n\n  const extendedData = extendData(props);\n  return (\n    <svg\n      viewBox={`0 0 ${props.viewBoxSize[0]} ${props.viewBoxSize[1]}`}\n      width=\"100%\"\n      height=\"100%\"\n      className={props.className}\n      style={props.style}\n    >\n      {renderSegments(extendedData, props, revealOverride)}\n      {props.label && renderLabels(extendedData, props)}\n      {props.children}\n    </svg>\n  );\n}\n\nPieChart.defaultProps = defaultProps;\nPieChart.displayName = 'ReactMinimalPieChart';\n"],"names":["degreesToRadians","degrees","Math","PI","valueBetween","value","min","max","extractPercentage","percentage","bisectorAngle","startAngle","lengthAngle","shiftVectorAlongAngle","angle","distance","angleRadians","dx","cos","dy","sin","isNumber","functionProp","prop","payload","sumValues","data","sum","i","length","extendData","totalAngle","totalValue","paddingAngle","chartStartAngle","total","normalizedTotalAngle","numberOfPaddings","abs","singlePaddingDegrees","sign","degreesTakenByPadding","degreesTakenByPaths","lastSegmentEnd","extendedData","dataEntry","valueInPercentage","push","Object","assign","Label","dataIndex","props","React","displayName","round","number","divisor","Number","EPSILON","evaluateTextAnchorPosition","labelPosition","lineWidth","labelHorizontalShift","innerRadius","renderLabelElement","renderLabel","labelProps","label","DefaultLabel","key","isValidElement","renderLabels","map","index","segmentsShift","distanceFromCenter","radius","labelRenderProps","x","center","y","textAnchor","style","labelStyle","partialCircle","cx","cy","r","start","end","fromX","fromY","toX","toY","large","sweep","module","makePathCommands","patchedLengthAngle","command","join","Path","shift","reveal","rounded","title","pathRadius","pathCommands","strokeDasharray","strokeDashoffset","pathLength","undefined","combineSegmentTransitionsStyle","duration","easing","customStyle","transition","getRevealValue","animate","makeEventHandler","eventHandler","e","renderSegments","revealOverride","paths","segmentsStyle","animationDuration","animationEasing","color","segmentsTabIndex","onBlur","onClick","onFocus","onKeyDown","onMouseOver","onMouseOut","background","unshift","defaultProps","viewBoxSize","PieChart","useState","setRevealOverride","useEffect","startInitialAnimation","animationTimerId","animationRAFId","setTimeout","requestAnimationFrame","clearTimeout","cancelAnimationFrame","className","children"],"mappings":"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"}